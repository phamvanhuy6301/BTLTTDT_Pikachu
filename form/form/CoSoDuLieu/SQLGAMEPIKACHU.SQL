

USE CSDL_PIKACHU
GO

CREATE TABLE BAN
(
	ID INT IDENTITY PRIMARY KEY, 
	TEN NVARCHAR(100),
	IDMAN INT NOT NULL,
	DAI INT NOT NULL ,
	RONG INT NOT NULL,
	SOMANG INT NOT NULL, 
	THOIGIAN INT NOT NULL,	
)
GO
CREATE TABLE TAIKHOAN
(
	TENDANGNHAP NVARCHAR(100) PRIMARY KEY NOT NULL,
	MATKHAU NVARCHAR(100) NOT NULL,
	TENNGUOICHOI NVARCHAR(100),
	--LOAITAIKHOAN INT  NOT NULL DEFAULT 1   --  CHUA CHAC LAM DUOC, 0 LA ADMIN VA 1 LA NGUOI CHOI
)
GO
CREATE TABLE O
(
	ID INT IDENTITY PRIMARY KEY,
	IDPOKEMON INT REFERENCES POKEMON(ID),
	TRANGTHAI INT NOT NULL
	
)
GO
CREATE TABLE POKEMON
(
	ID INT IDENTITY PRIMARY KEY, 
	TEN NVARCHAR(50) NOT NULL, 
	DAI INT NOT NULL,
	RONG INT NOT NULL,
	HE NVARCHAR(20)
)
GO
CREATE TABLE THONGTINCANHAN
(
	ID INT IDENTITY PRIMARY KEY,
	TENDANGNHAP NVARCHAR(100) REFERENCES TAIKHOAN(TENDANGNHAP),
	GIOITINH INT, 
	TUOI INT, 
	TENNGUOICHOI NVARCHAR(100) NOT NULL,
	EMAIL NVARCHAR(100)
)
GO
CREATE TABLE PHIENCHOI
(
	ID INT IDENTITY PRIMARY KEY,
	TENDANGNHAP NVARCHAR(100) REFERENCES TAIKHOAN(TENDANGNHAP),
	DIEM INT NOT NULL,
	TRANGTHAI INT NOT NULL DEFAULT 0, -- 0: DANG CHOI, 1: KETTHUC
	THOIGIANBATDAU DATETIME NOT NULL,
	THOIGIANKETTHUC DATETIME
)
GO
CREATE TABLE THANHTICH
(
	ID INT IDENTITY PRIMARY KEY NOT NULL,
	TENNGUOICHOI NVARCHAR(100),
	DIEMCAONHAT INT,
	SOPHIENCHOI INT,
	TONGTHOIGIANCHOI INT, --CHUA CHAC LAM DUOC
	TENDANGNHAP NVARCHAR(100) REFERENCES TAIKHOAN(TENDANGNHAP)
)
GO
CREATE TABLE MAN
(
	ID INT IDENTITY PRIMARY KEY,
	SOMANG INT NOT NULL, -- SO MANG TOI DA
	DIEMMAN INT NOT NULL, 
	IDHINHNEN INT REFERENCES HINHNEN(ID), -- THEM HINH NEN MAC DINH O DAY
	THOIGIAN INT NOT NULL, -- TINH BANG GIAY, LA THOI GIAN TOI DA CHO MOI MAN
	SOPOKEMON INT NOT NULL,

)
GO
CREATE TABLE HINHNEN
(
	ID INT IDENTITY PRIMARY KEY,
	TEN NVARCHAR
)
GO
ALTER TABLE BAN ADD CONSTRAINT FK_BAN_IDMAN FOREIGN KEY (IDMAN) REFERENCES MAN(ID);
